---
---

h3. Some of the highlights in this release

p. Test enrichment for @In injection points from the Seam 2 Context.

p. Packaging support for adding the Seam 2 framework.

p. Tested on JBoss AS 4.2.3.GA and 5.1.0.Final (both managed and remote)

bc(prettify).. @Name("fluidOuncesConverter")
public class FluidOuncesConverter
{

   public Double convertToMillilitres(Double ounces)
   {
      return ounces * 29.5735296;
   }

}

@RunWith(Arquillian.class)
public class ComponentInjectionTestCase
{
   @Deployment
   public static Archive<?> createDeployment()
   {
      return ShrinkWrap.create(WebArchive.class, "test.war")
                       .addClass(FluidOuncesConverter.class)
                       .addAsResource(EmptyAsset.INSTANCE, "seam.properties")
                       .setWebXML("web.xml");
   }

   @In
   FluidOuncesConverter fluidOuncesConverter;

   @Test
   public void shouldInjectSeamComponent() throws Exception
   {
      assertThat(fluidOuncesConverter).isNotNull();
   }

   @Test
   public void shouldConvertFluidOuncesToMillilitres() throws Exception
   {
      // given
      Double ouncesToConver = Double.valueOf(8.0d);
      Double expectedMillilitres = Double.valueOf(236.5882368d);

      // when
      Double millilitres = fluidOuncesConverter.convertToMillilitres(ouncesToConver);

      // then
      assertThat(millilitres).isEqualTo(expectedMillilitres);
   }
}

